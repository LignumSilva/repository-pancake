var onScreen=4,screenWidth,screenHeight,moving=!1,bOn,firstRun=!0,isStopwatch=!0,countdownTime;setVisibleMode(!0);dispathFunction="timesUp";var allLoaded=!1,tmpCountdownValue="",isRunning=!1,newSound="",audioChk;function sizeText(a,b,c,e,d){boxWidth=parseInt(document.getElementById(a).offsetWidth);boxHeight=parseInt(document.getElementById(a).offsetHeight);c=parseInt(b/c*boxWidth);b=parseInt(b/e*boxHeight);e=c;c>b&&(e=b);document.getElementById(a).style.fontSize=e+"px";document.getElementById(a).style.lineHeight=screenHeight/d+"px";"displayScreen"==a&&(document.getElementById("mills").style.fontSize=e/6+"px",a=parseInt(document.getElementById("time").offsetHeight),parseInt(document.getElementById("mills").offsetHeight),d=parseInt(document.getElementById("displayScreen").offsetWidth/2),c=parseInt(document.getElementById("mills").offsetWidth/2),b=parseInt(document.getElementById("time").offsetWidth/2.8),document.getElementById("mills").style.left=parseInt(document.getElementById("displayScreen").offsetLeft)+(d-c)+b+"px",d=parseInt(document.getElementById("displayScreen").offsetTop+document.getElementById("time").offsetTop)+a,document.getElementById("mills").style.top=d-a/7+"px")}
function sizeImage(a,b,c,e,d){boxWidth=parseInt(document.getElementById(a).offsetWidth);boxHeight=parseInt(document.getElementById(a).offsetHeight);b=parseInt(e/b*boxWidth);c=parseInt(d/c*boxHeight);d=b;b>c&&(d=c);document.getElementById(a).style.backgroundSize=d+"px auto"}
function onUpdate(){screenHeight=parseInt(document.getElementById("timer").offsetHeight);screenWidth=parseInt(document.getElementById("timer").offsetWidth);document.getElementById("contents").style.width=3*screenWidth+"px";for(i=1;3>i;i++)document.getElementById("s"+i).style.width=screenWidth+"px",document.getElementById("s"+i).style.left=screenWidth-onScreen*screenWidth+"px";sizeText("homeLink",13,400,20,11);sizeText("displayScreen",74,386,85,3);sizeText("doClear",22,150,60,4);sizeText("doStart",22,150,60,4);sizeText("doSet",22,99,29,8);sizeText("doUnSet",22,99,29,8);sizeText("do0",22,50,27,8);sizeText("do1",22,50,27,8);sizeText("do2",22,50,27,8);sizeText("do3",22,50,27,8);sizeText("do4",22,50,27,8);sizeText("do5",22,50,27,8);sizeText("do6",22,50,27,8);sizeText("do7",22,50,27,8);sizeText("do8",22,50,27,8);sizeText("do9",22,50,27,8);sizeText("setTime",74,386,85,3);sizeText("doBack",13,200,20,11);sizeImage("doBack",200,20,14,11)}window.onresize=function(){onUpdate();return!1};function move(a){if("right"==a){for(i=1;3>i;i++)document.getElementById("s"+i).style.left=parseInt(document.getElementById("s"+i).style.left)-30+"px";parseInt(document.getElementById("s"+onScreen).style.left)<-(onScreen*screenWidth)&&(clearInterval(moveTimer),moveTimer="",document.getElementById("s1").style.left="-"+onScreen*screenWidth+"px",document.getElementById("s2").style.left="-"+onScreen*screenWidth+"px",document.getElementById("s3").style.left="-"+onScreen*screenWidth+"px",onScreen+=1,moving=!1,doneMoving())}else if("left"==a){for(i=1;3>i;i++)document.getElementById("s"+i).style.left=parseInt(document.getElementById("s"+i).style.left)+30+"px";parseInt(document.getElementById("s"+onScreen).style.left)>bOn&&(clearInterval(moveTimer),moveTimer="",document.getElementById("s1").style.left=bOn+"px",document.getElementById("s2").style.left=bOn+"px",document.getElementById("s3").style.left=bOn+"px",document.getElementById("s"+onScreen).style.visibility="hidden",onScreen-=1,moving=!1,doneMoving())}1==onScreen?document.getElementById("doBack").style.visibility="visible":document.getElementById("doBack").style.visibility="hidden";return!1}function doneMoving(){thisTimerRestart();newStopwatch()}function slideScreen(a){moving||(document.getElementById("s"+("left"==a?onScreen-1:onScreen+1)).style.visibility="visible",bOn=parseInt(document.getElementById("s"+onScreen).style.left)- -screenWidth,moving=!0,moveTimer=setInterval('move("'+a+'")',30));return!1}
function backButton(){1==onScreen?slideScreen("right"):3==onScreen&&slideScreen("left");return!1}
function thisTimer(){isRunning?(jsc("p"),document.getElementById("doStart").innerHTML="Continue",document.getElementById("doStart").style.backgroundColor="#30d731",document.getElementById("doStart").style.backgroundImage="url(images/sb.png)"):(firstRun&&(isStopwatch?jsc("00:00:00:000:true"):jsc(countdownTime+":false"),firstRun=!1),jsc("p"),document.getElementById("doStart").innerHTML="Pause",document.getElementById("doStart").style.backgroundColor="#2e84d9",document.getElementById("doStart").style.backgroundImage="url(images/sb2.png)")}
function thisTimerRestart(){isRunning&&jsc("p");document.getElementById("displayScreen").style.backgroundColor="#E6E9FF";document.getElementById("doStart").innerHTML="Start";document.getElementById("doStart").style.backgroundColor="#30d731";document.getElementById("doStart").style.backgroundImage="url(images/sb.png)";isStopwatch?jsc("00:00:00:000:true"):jsc(countdownTime+":false");firstRun=!0;isRunning=!1;document.getElementById(audioChk).pause();document.getElementById("doStart").style.visibility="visible"}
function newStopwatch(){countdownTime="00:00:00:000";isStopwatch=!1;jsc(countdownTime+":true");document.getElementById("time").innerHTML="00:00:00";document.getElementById("displayScreen").style.backgroundColor="#E6E9FF"}
function addToCountdown(a){if(7==tmpCountdownValue.length)clearCountdown();else{a=tmpCountdownValue+=a;for(i=a.length;6>i;i++)a="0"+a;document.getElementById("setTime").innerHTML="";document.getElementById("setTime").innerHTML=a.substr(a.length-2,2);a=a.substr(0,a.length-2);document.getElementById("setTime").innerHTML=a.substr(a.length-2,2)+":"+document.getElementById("setTime").innerHTML;a=a.substr(0,a.length-2);document.getElementById("setTime").innerHTML=a+":"+document.getElementById("setTime").innerHTML}return!1}
function clearCountdown(){tmpCountdownValue="";document.getElementById("setTime").innerHTML="00:00:00";return!1}function setCountdown(){"00:00:00"!=document.getElementById("setTime").innerHTML&&soundHold();return!1}
function soundHold(){document.getElementById(audioChk).play();if(4!==document.getElementById(audioChk).readyState&&"complete"!==document.getElementById(audioChk).readyState){document.getElementById("s3").style.visibility="hidden";document.getElementById("doBack").style.visibility="hidden";document.getElementById("s3").innerHTML="Loading Audio...";document.getElementById("s3").style.visibility="visible";document.getElementById("s3").style.width=document.getElementById("s1").offsetWidth+"px";document.getElementById("s3").style.height=document.getElementById("s1").offsetHeight+"px";document.getElementById(audioChk).addEventListener("canplaythrough",function(){document.getElementById(audioChk).pause();document.getElementById("s3").style.visibility="hidden";countdownSet()});document.getElementById(audioChk).addEventListener("load",function(){document.getElementById("s3").style.visibility="hidden";countdownSet()});setTimeout(a,1);var a=function(){document.getElementById(audioChk).pause()}}else document.getElementById(audioChk).pause(),countdownSet();return!1}
function countdownSet(){document.getElementById("s3").style.visibility="hidden";document.getElementById("s1").style.left="0px";document.getElementById("s2").style.left="0px";document.getElementById("s3").style.left="0px";document.getElementById("s1").style.visibility="visible";onScreen=1;document.getElementById("doBack").style.visibility="visible";isStopwatch=!1;tmpCountdownValue="";var a=str2mills(document.getElementById("setTime").innerHTML+":000");countdownTime=document.getElementById("setTime").innerHTML+":000";document.getElementById("setTime").innerHTML="00:00:00";t=mills2str(a).split(":");document.getElementById("time").innerHTML=0<t[0]?t[0]+":"+t[1]+":"+t[2]+":"+t[3]:t[1]+":"+t[2]+":"+t[3]}function disableSelect(a){document.getElementById(a).addEventListener?document.getElementById(a).addEventListener("mousedown",disabler,"false"):document.getElementById(a).attachEvent("onselectstart",disabler)}function disabler(a){a.preventDefault&&a.preventDefault();return!1}
function timesUp(){playSound();document.getElementById("doStart").style.visibility="hidden";document.getElementById("time").innerHTML="00:00:00";document.getElementById("mills").innerHTML="000";document.getElementById("displayScreen").style.backgroundColor="#F9757A"}
function preLoadAudio(a){document.createElement("audio").canPlayType?audioChk="audio1":(document.getElementById("playAudio").innerHTML='<embed class="hid" src="'+a+'" loop=true autostart=false width=1 height=1 id="sound1" name="sound1" enablejavascript="true">',audioChk="sound1")}function playSound(){document.getElementById(audioChk).play();return!1}window.onload=firstLoad;function firstLoad(){preLoadAudio("bell.mp3");var a="ontouchstart"in window.document?"touchstart":"mousedown";document.getElementById("doStart").addEventListener(a,function(){thisTimer()},!1);document.getElementById("doClear").addEventListener(a,function(){thisTimerRestart()},!1);document.getElementById("do0").addEventListener(a,function(){addToCountdown(0)},!1);document.getElementById("do1").addEventListener(a,function(){addToCountdown(1)},!1);document.getElementById("do2").addEventListener(a,function(){addToCountdown(2)},!1);document.getElementById("do3").addEventListener(a,function(){addToCountdown(3)},!1);document.getElementById("do4").addEventListener(a,function(){addToCountdown(4)},!1);document.getElementById("do5").addEventListener(a,function(){addToCountdown(5)},!1);document.getElementById("do6").addEventListener(a,function(){addToCountdown(6)},!1);document.getElementById("do7").addEventListener(a,function(){addToCountdown(7)},!1);document.getElementById("do8").addEventListener(a,function(){addToCountdown(8)},!1);document.getElementById("do9").addEventListener(a,function(){addToCountdown(9)},!1);document.getElementById("doUnSet").addEventListener(a,function(){clearCountdown()},!1);document.getElementById("doSet").addEventListener(a,function(){setCountdown()},!1);document.getElementById("doBack").addEventListener(a,function(){backButton()},!1);disableSelect("doClear");disableSelect("doStart");disableSelect("doBack");disableSelect("doUnSet");disableSelect("doSet");disableSelect("do0");disableSelect("do1");disableSelect("do2");disableSelect("do3");disableSelect("do4");disableSelect("do5");disableSelect("do6");disableSelect("do7");disableSelect("do8");disableSelect("do9");document.getElementById("s1").style.width="100%";document.getElementById("s2").style.width="100%";document.getElementById("s2").style.visibility="visible";document.getElementById("s3").style.visibility="hidden";document.getElementById("s3").style.width="0%";document.getElementById("s3").style.height="0%";onScreen=2;onUpdate();allLoaded=!0;return!1};